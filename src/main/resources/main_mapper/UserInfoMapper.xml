<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.ayoteralab.main.mapper.UserInfoMapper">

<select id="getUserInfoById" resultType="com.example.ayoteralab.main.dto.MyUserDetails">
<![CDATA[
	SELECT
		*
	FROM user_info
	WHERE LOGIN_ID = #{username}
]]>
</select>

<insert id="signupUser" parameterType="com.example.ayoteralab.main.dto.UserDTO">
<![CDATA[
	INSERT INTO user_info
    	(LOGIN_ID, LOGIN_PASS, FULL_NAME, EMAIL, CREATE_DATE, LAST_LOGIN_PASS_UPDATE_DATE, DELETE_YN, LOGIN_FAIL_COUNT)
	VALUES
	    (#{user.loginId}, #{user.loginPassEncrypt}, #{user.fullName}, #{user.email}, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 'N', 0); 
]]>
</insert>

<select id="getUserRoleByUserId" resultType="java.lang.String">
<![CDATA[
	SELECT
		B.ROLE_NAME
	FROM user_role A
	LEFT JOIN role_info B
	ON A.ROLE_ID = B.ROLE_ID
	where A.USER_ID = #{userId}
]]>
</select>

</mapper>